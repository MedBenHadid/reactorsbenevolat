{% extends '::base.html.twig' %}
{% block title %}Mission{% endblock %}
{% block bread %}<a href="{{ path('mission_index') }}"> / Mission</a>{% endblock %}
    {% block stylesheets %}<link href="{{ asset('assets/back/dist/css/MissionCards.css')}}" rel="stylesheet">{% endblock %}

{% block body %}

    <h1>Missions list</h1>
    <div class="container-fluid">
        <div class="row">
            {% for mission in missions %}

                <div class="col-lg-4 col-md-4 col-sm-6 col-xs-12">
                    <div class="tile">
                        <div class="wrapper">
                            <div class="header">{{ mission.titleMission }}</div>

                            <div class="banner-img">
                                <img  style="width: 130px;height: 130px;" src="{{ asset('uploads/mission/images/'~mission.picture) }}" alt="{{ mission.titleMission }}">
                            </div>

                            <div class="dates">
                                <div class="start">
                                    <strong>STARTS</strong> {{ mission.dateCreation|date('Y-m-d') }}
                                    <span></span>
                                </div>
                                <div class="ends">
                                    <strong>ENDS</strong> {{ mission.dateFin|date('Y-m-d') }}
                                </div>
                            </div>

                            <div class="statss">

                                <div>
                                    <strong>INVITED</strong> {{ mission.invitation }}
                                </div>

                                <div>
                                    <strong>JOINED</strong> {{ mission.accpter }}
                                </div>

                                <div>
                                    <strong>DECLINED</strong> {{ mission.refuser }}
                                </div>

                            </div>

                            <!--   <div class="statss">

                                   <div>
                                       <strong>Nbr UPs</strong> 3098
                                   </div>

                                   <div>
                                       <strong>SUM $</strong> 562
                                   </div>

                                   <div>
                                       <strong>DECLINED</strong> 182
                                   </div>

                               </div>--!>

                            <div class="statss">
                                <strong>Mission Progress</strong>
                            </div>

                            <div class="progress">

                                <div class="progress-bar progress-bar-striped progress-bar-animated"
                                     role="progressbar" aria-valuenow="75" aria-valuemin="0"
                                     aria-valuemax="100" style="width: {{(30/90)*100}}%"></div>
                            </div>
                        </div>

                        <div class="footer">
                            <a href="{{ path('mission_show', { 'id': mission.id }) }}" class="Cbtn Cbtn-primary">View</a>
                            <a style="" href="{{ path('mission_edit', { 'id': mission.id }) }}" class="Cbtn Cbtn-success" >Update</a>

                            <a href="" class="Cbtn Cbtn-danger"  data-toggle="modal" data-target="#myModal-{{ mission.id }}">Delete</a>
                        </div>
                        <!-- Modal -->
                        <div class="modal fade" id="myModal-{{ mission.id }}" role="" aria-labelledby="myModalLabel" >
                            <div class="modal-dialog" role="document"  >
                                <div class="modal-content" >
                                    <div class="modal-header">
                                        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                        <h4 class="modal-title" id="myModalLabel">{{ mission.titleMission }}</h4>
                                    </div>
                                    <div class="modal-body">
                                        Êtes vous sûrs de supprimer cette mission ?
                                    </div>
                                    <div class="modal-footer">
                                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                        <a href="{{ path('mission_delete', { 'id': mission.id }) }}" type="button" class="btn btn-danger">Delete</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- END Modal -->
                    </div>
                </div>
            {% endfor %}

        </div>

    </div>


    <ul>
        <li>
            <a href="{{ path('mission_new') }}">Create a new mission</a>
        </li>
    </ul>
{% endblock %}
{% block bootstrap4 %}
{% endblock %}